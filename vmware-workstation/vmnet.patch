diff --git a/vmnet/Makefile b/vmnet/Makefile
index fab02bf..ac8cc7f 100644
--- a/vmnet/Makefile
+++ b/vmnet/Makefile
@@ -40,8 +40,11 @@ else
 INCLUDE      += -I$(SRCROOT)/shared
 endif
 
-
-VM_UNAME = $(shell uname -r)
+ifdef KVERSION
+ VM_UNAME = $(KVERSION)
+else
+ VM_UNAME = $(shell uname -r)
+endif
 
 # Header directory for the running kernel
 ifdef LINUXINCLUDE
