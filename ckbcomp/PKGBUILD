# Maintainer: Nissar Chababy <funilrys at outlook dot com>
# Ex-Maintainer: 	Jeroen Bollen <jbinero at gmail dot comau>

pkgname=ckbcomp
pkgver=1.226
pkgrel=1
pkgdesc="Compile a XKB keyboard description to a keymap suitable for loadkeys or kbdcontrol"
arch=(any)
url="http://anonscm.debian.org/cgit/d-i/console-setup.git/"
license=('GPL2')
depends=('perl')
source=("http://ftp.debian.org/debian/pool/main/c/console-setup/console-setup_${pkgver}.tar.xz")
sha512sums=('1b742ec2f43d50d1ab233864fdace5f1bda6ae40d6a3d16768dd804825c769f198e3a0ddb2b4e7420d13678073cd146e7a784e3e5de74f9d2726ba4a01a88006')
conflicts=(ckbcomp-bin)

package() {
  if [[ -d "${srcdir}/console-setup" ]]; then
    cd console-setup
  elif [[ -d "${srcdir}/console-setup-${pkgver}" ]]; then
    cd console-setup-${pkgver}
  elif [[ -d "${srcdir}/work" ]]; then
    cd work
  else
    echo "Source directory not found.".
    exit 1
  fi

  if [[ ${?} != 0 ]]; then
    cd console-setup-${pkgver}
  fi

  install -d ${pkgdir}/usr/bin/
  install -m755 Keyboard/ckbcomp ${pkgdir}/usr/bin/
}
